package xjsnark.zkrollup1;

/*Generated by MPS */

import backend.auxTypes.UnsignedInteger;
import java.math.BigInteger;
import backend.structure.CircuitGenerator;

public class LeafExistence {
  public UnsignedInteger leaf = new UnsignedInteger(32, new BigInteger("0"));
  public UnsignedInteger root = new UnsignedInteger(32, new BigInteger("0"));
  public int k;
  public UnsignedInteger[] paths2_root_pos;
  public UnsignedInteger[] paths2_root;

  public GetMerkleRoot computed_root;

  public LeafExistence(int kk, UnsignedInteger leaff, UnsignedInteger roott, UnsignedInteger[] pt, UnsignedInteger[] ptp) {
    this.k = kk;
    this.leaf.assign(leaff, 32);
    this.root.assign(roott, 32);

    paths2_root = (UnsignedInteger[]) UnsignedInteger.createZeroArray(CircuitGenerator.__getActiveCircuitGenerator(), new int[]{k}, 32);
    paths2_root_pos = (UnsignedInteger[]) UnsignedInteger.createZeroArray(CircuitGenerator.__getActiveCircuitGenerator(), new int[]{k}, 32);
    this.paths2_root = pt;
    this.paths2_root_pos = ptp;

    computed_root = new GetMerkleRoot(leaf.copy(32), k, paths2_root, paths2_root_pos);

  }


  public void Compare() {
    // 这里xjsnark语法不能这么比较 需要修改 
    // the IF function will output all results when use EQ and NEQ  
    if (root == computed_root.out) {
      System.out.println("merkle root true");
    }
    if (root != computed_root.out) {
      System.out.println("merkle root false");
    }
  }

}
